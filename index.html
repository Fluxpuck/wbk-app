<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>WBK - Home</title>
</head>

<body>

    <main class="content">
        <form x-on:keydown.prevent.enter="">

            <!-- Information Tab -->
            <section id="info-tab" class="content-container-page">

                <label class="content-container-label">
                    <h1>Informatie</h1>
                </label>

                <div class="content-container-left first-content">
                    <div class="survey-info">
                        <h1>Beweegonderzoek</h1>
                        <p>Welkom bij het beweegonderzoek voor inwoners van Stratum. Het doel van dit onderzoek is de
                            sport en beweeg wensen en behoeften te achterhalen. Deze informatie is van belang voor de
                            herontwikkelingsplannen van de gemeente Eindhoven.</p>
                        <p>Dit onderzoek duurt ongeveer 2 minuten.</p>
                        <p>Meer informatie over het beweegonderzoek kunt u vinden op <a
                                href="https://innobeweeglab.nl/beweegonderzoek/">InnoBeweegLab.nl</a>.</p>
                        <br>
                        <input id="check" type="checkbox" required><span>ik ga akkoord met de <a href="">algemene
                                voorwaarden</a></span></input>
                    </div>

                    <div class="button-box check">
                        <input class="next-btn btn" type="button" value="Start" />
                    </div>

                </div>

                <div class="content-container-right">
                    <img id="beweegAfbeelding"
                        src="https://innobeweeglab.nl/wp-content/uploads/2022/06/DSC_0856v2-scaled.jpg" />
                </div>
            </section>


            <!-- Identity Tab -->
            <section id="iden-tab" class="content-container-page" style="display:none;">
                <label class="content-container-label">
                    <h1>1. Deelnemer</h1>
                </label>
                <div class="content-container-left">

                    <article class="content-article">

                        <div>
                            <h1>1.1 Wat is uw voornaam?</h1>
                            <p>Om een beeld te krijgen bij de deelnemers van het beweegondoerzoek vragen wij om uw
                                voornaam.</p>
                            <input id="naam" class="input-fld" type="text" placeholder="voornaam"
                                pattern="[A-Za-z]{1,32}" maxlength="16" required />
                        </div>
                        <div>
                            <h1>1.2 Wat is uw leeftijd?</h1>
                            <p>Graag krijgen wij een indicatie tot welke leefdtijdsgroep u behoord.</p>
                            <select id="leeftijd" class="input-fld" placeholder="leeftijd" onclick="showCharacter()"
                                required>
                                <option value="5/11">5 - 11 jaar</option>
                                <option value="12/17">12 - 17 jaar</option>
                                <option value="18/34">18 - 34 jaar</option>
                                <option value="35/64">35 - 64 jaar</option>
                                <option value="65+">65+</option>
                            </select>
                        </div>
                        <div>
                            <h1>1.3 Wat is uw postcode?</h1>
                            <p>Dit onderzoek is gericht op wijkbewoners van Stratum te Eindhoven. Ter verificatie hebben
                                we uw postcode nodig.</p>
                            <input id="postcode" class="input-fld" type="text" placeholder="postcode" pattern="[0-9]{4}"
                                maxlength="4" required />
                        </div>

                    </article>

                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="next-btn btn" type="button" value="next >" />
                    </div>

                </div>
                <div class="content-container-right">



                </div>
            </section>


            <!-- NNGB Tab -->
            <section id="nngb-tab" class="content-container-page" style="display:none;">
                <label class="content-container-label">
                    <h1>2. NNGB</h1>
                </label>
                <div class="content-container-left">

                    <article class="content-article">

                        <div>
                            <h1>2.1 Heeft u een fysieke beperking?</h1>
                            <p>Sporten en bewegen voor mensen met een fysieke beperking is niet vanzelfsprekend. Graag
                                komen wij te weten of u een fysieke beperking heeft.</p>
                            <br>
                            <div>
                                <input type="radio" name="beperking" id="beperking-yes" value="Ja">
                                <label for="beperking">Ja</label><br>
                                <input type="radio" name="beperking" id="beperking-no" value="Nee">
                                <label for="beperking">Nee</label><br>
                            </div>
                        </div>

                        <div>
                            <h1>2.2 Voldoet u aan de beweegrichtlijnen?</h1>
                            <p>Bewegen en sporten is goed voor je. In het beweegonderzoek komen wij graag te weten of je
                                aan de beweegrichtlijnen voor gezond bewegen voldoet.</p>
                            <br>
                            <div>
                                <input type="radio" name="nngb" id="nngb-yes" value="Ja">
                                <label for="nngb">Ja</label><br>
                                <input type="radio" name="nngb" id="nngb-no" value="Nee">
                                <label for="nngb">Nee</label><br>
                            </div>
                        </div>



                    </article>

                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="next-btn btn" type="button" value="next >" />
                    </div>

                </div>
                <div class="content-container-right">

                    <div class="nngb-container-title">
                        <h1>NNGB - Nationale Norm Gezond Bewegen</h1>
                        <p>De beweegrichtlijnen, zoals opgesteld door het kenniscentrum Sport & Bewegen voor de
                            Nationale
                            Norm Gezond Bewegen.</p>
                    </div>

                    <div class="nngb-container" id="NNGB1" style="display: none;">
                        <div class="nngb-container-item">
                            <img src="./images/nngb/ropejump.png" alt="Rope jumping" />
                            <div>
                                <h2>1 uur per dag</h2>
                                <p>Matig intensief bewegen (als je ademhaling sneller wordt).</p>
                            </div>
                        </div>
                        <div class="nngb-container-item">
                            <img src="./images/nngb/hanging.png" alt="Hanging" />
                            <div>
                                <h2>3x per week</h2>
                                <p>Sport(ieve) activiteiten zoals fietsen, buitenspelen, fitness en andere sporten.</p>
                            </div>
                        </div>
                    </div>

                    <div class="nngb-container" id="NNGB2" style="display: none;">
                        <div class="nngb-container-item">
                            <img src="./images/nngb/cycling.png" alt="Cycling">
                            <div>
                                <h2>2,5 uur per week</h2>
                                <p>Matig intensief bewegen (als je ademhaling sneller wordt), verspreid over meerdere
                                    dagen.
                                </p>
                            </div>
                        </div>
                        <div class="nngb-container-item">
                            <img src="./images/nngb/yoga.png" alt="Yoga">
                            <div>
                                <h2>2x per week</h2>
                                <p>Sport(ieve) activiteiten zoals fietsen, buitenspelen, fitness en andere sporten (voor
                                    ouderen in combinatie met balans oefeningen).</p>
                            </div>
                        </div>
                    </div>

                </div>
            </section>


            <!-- Character Selection -->
            <section id="char-tab" class="content-container-page" style="display:none;">
                <div class="content-container-left">
                    <article class="content-article">

                        <div id="avatars-5/11">
                            <img src="./images/avatars/Asset 1@4x.png">
                            <img src="./images/avatars/Asset 1@4x.png">
                        </div>
                        <div id="avatars-12/17">

                        </div>
                        <div id="avatars-18/34">

                        </div>
                        <div id="avatars-35/64">

                        </div>
                        <div id="avatars-65+">

                        </div>

                    </article>

                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="next-btn btn" type="button" value="next >" />
                    </div>

                </div>
                <div class="content-container-right">





                    <input type="number" style="display: none;" />

                </div>
            </section>








            <!-- WijkBeweegKaart -->
            <section id="wbk-tab" class="content-container-page" style="display:none;">
                <div class="content-container-left">
                    <article class="content-article">
                        <div>
                            <h1>WijkBeweegkaart</h1>
                            <p>Sleep de sport- en speel-elementen die u wenst op de kaart en laat uw behoefte zien</p>
                            <br>
                            <nav class="item-elements" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div id="item0" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item1" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item2" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item3" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item4" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item5" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item6" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item7" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                            </nav>
                        </div>
                    </article>
                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="next-btn btn" type="button" value="next >" />
                    </div>

                </div>
                <div class="content-container-right">
                    <div class="map">
                        <section class="wrapper"></section>
                    </div>
                </div>
            </section>


            <!-- Thanks Screen -->
            <section id="thnx-tab" class="content-container-page" style="display:none;">
                <div class="content-container-left">
                    <div class="survey-info">
                        <h1>Bedankt voor uw bijdragen!</h1>
                        <p>InnoBeweegLab en de Gemeente Eindhoven bedanken u voor uw bijdragen aan het beweegonderzoek.
                        </p>
                        <p>U kunt verder helpen door dit onderzoek te delen met uw naaste familie en andere
                            wijkbewoners!</p>
                    </div>
                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="subm-btn btn" type="submit" />
                    </div>

                </div>
                <div class="content-container-right">

                    <img id="beweegAfbeelding" alt="InnoBeweegLab"
                        src="https://innobeweeglab.nl/wp-content/uploads/2022/07/IMG_5414-1-scaled-e1658235684100.jpg" />

                </div>
            </section>


        </form>
    </main>

    <script>
        /* Pagination function for the Form*/
        //put all container pages in an array
        const formPages = document.getElementsByClassName('content-container-page')
        const buttonArray = document.getElementsByClassName('btn');
        var currentPage = 0

        //for each button press, action
        for (let btn of buttonArray) {
            btn.addEventListener('click', async event => {
                //check if button is checked
                if (document.getElementById('check').checked == false) return alert("Je hebt de algemene voorwaarden niet geaccepteerd.");
                //go to next page
                if (btn.classList.contains('next-btn')) {
                    if (currentPage < formPages.length) {

                        //check if name, age and postcode is filled
                        if (formPages[currentPage].id == "iden-tab") {
                            // --> check if name is given
                            const nameInput = document.getElementById('naam').value
                            if (!nameInput) return alert('U heeft uw naam nog niet opgegeven.')

                            // --> check if age is selected
                            const ageInput = document.getElementById('leeftijd').value
                            if (!ageInput) return alert('Selecteer een leeftijdscategorie.')

                            // --> check if postcode is valid in Stratum
                            const response = await fetch('https://data.eindhoven.nl/api/records/1.0/search/?dataset=postcode-buurt-wijk&q=&rows=50&facet=postcode4')
                            const result = response ? await response.json() : null
                            if (response == null) return alert('Oops... er is iets mis gegaan!')
                            //construct data-points
                            const zipCodes = result.facet_groups[0].facets.map(i => i.name)
                            const zipInput = document.getElementById('postcode').value
                            //check postcode
                            if (zipInput) {
                                if (!zipCodes.includes(zipInput.toString())) return alert("Uw postcode komt niet uit de wijk Stratum, te Eindhoven. Dit onderzoek is uitsluitend gericht op inwoners van deze wijk.");
                            } else {
                                return alert("U heeft nog geen postcode ingevoerd.");
                            }

                            // ->> set NNGB image, based on age
                            const nngb1 = document.getElementById('NNGB1');
                            const nngb2 = document.getElementById('NNGB2');
                            if (ageInput == '5/11' || ageInput == '12/17') {
                                nngb1.style.display = 'grid';
                                nngb2.style.display = 'none';
                            } else {
                                nngb1.style.display = 'none';
                                nngb2.style.display = 'grid';
                            }
                        }

                        //check if Beperking & NNGB has been checked
                        if (formPages[currentPage].id == "nngb-tab") {
                            const beperking1 = document.getElementById('beperking-yes');
                            const beperking2 = document.getElementById('beperking-no');
                            if (beperking1.checked == false && beperking2.check == false) return alert("Beantwoord vraag 2.1 door 'Ja' of 'Nee' te selecteren.")
                            if (beperking1.checked == true && beperking2.check == true) return alert("Het is de bedoeling om maar één antwoord te selecteren, 'Ja' of 'Nee'.")

                            const nngb1 = document.getElementById('nngb-yes');
                            const nngb2 = document.getElementById('nngb-no');
                            if (nngb1.checked == false && nngb2.checked == false) return alert("Beantwoord vraag 2.2 door 'Ja' of 'Nee' te selecteren.")
                            if (nngb1.checked == true && nngb2.checked == true) return alert("Het is de bedoeling om maar één antwoord te selecteren, 'Ja' of 'Nee'.")
                        }




                        //if character tab, check if a character is selected
                        if (formPages[currentPage].id == "char-tab") {
                            //get all avatar items
                            const avatarArray = document.getElementById('avatar-children');
                            let isAvatarSelecter = false
                            for (let child of avatarArray.children) {
                                if (child.selected == true) isAvatarSelecter = true;
                            }
                            if (isAvatarSelecter == false) return alert("U heeft nog geen character geselecteerd.")
                        }



                        //if wijkbeweegkaart tab, kijk of de kaart is gevuld en bewaar de 
                        if (formPages[currentPage].id == "wbk-tab") {
                            if (dropItemLocations.size < 2) return alert("U heeft nog geen sport- en beweegbehoeften aangegeven!")
                        }



                        //disable current page
                        formPages[currentPage].style.display = "none";
                        //move up page
                        currentPage++
                        //show new page
                        formPages[currentPage].style.display = "grid";
                    }
                }
                //go to previous page
                if (btn.classList.contains('prev-btn')) {
                    if (currentPage > 0) {
                        //disable current page
                        formPages[currentPage].style.display = "none";
                        //move down page
                        currentPage--
                        //show new page
                        formPages[currentPage].style.display = "grid";
                    }
                }

            })
        }
    </script>

    <script>
        // function showCharacter() {
        //     //get selected value
        //     const ageSelection = document.getElementById('leeftijd').value
        //     const avatarArray = document.getElementById('avatar-children');
        //     //disable all children
        //     for (const child of avatarArray.children) {
        //         child.style.display = "none";
        //     }
        //     //show characters, based on selection
        //     switch (ageSelection) {
        //         case "5/11":
        //             for (const child of avatarArray.children) {
        //                 if (child.value == "5/11") child.style.display = "block";
        //             }
        //             break;
        //         case "12/17":
        //             for (const child of avatarArray.children) {
        //                 if (child.value == "12/17") child.style.display = "block";
        //             }
        //             break;
        //         case "18/34":
        //             for (const child of avatarArray.children) {
        //                 if (child.value == "18/34") child.style.display = "block";
        //             }
        //             break;
        //         case "35/64":
        //             for (const child of avatarArray.children) {
        //                 if (child.value == "35/64") child.style.display = "block";
        //             }
        //             break;
        //         case "65+":
        //             for (const child of avatarArray.children) {
        //                 if (child.value == "65+") child.style.display = "block";
        //             }
        //             break;
        //         default:
        //             // return alert('Oops. Je moet een leeftijd selecteren, voordat je een karakter kan selecteren.')
        //             break;
        //     }
        // }

        function selectCharacter(avatars) {
            for (const child of avatars.children) {
                child.addEventListener('click', async event => {
                    //disable all children
                    for (const item of avatars.children) {
                        item.selected = null
                    }
                    //give item selected value
                    event.srcElement.selected = 'selected'
                })
            }
        }
    </script>

    <script>
        //get container size and calculate the amount of tiles it needs to create
        const container = document.getElementsByClassName("content-container-right")[0];
        let width = container.offsetWidth;
        let height = container.offsetHeight;
        const x = Math.round(width / 20) * 20;
        const y = Math.round(height / 20) * 20;
        const boxSize = 50 * 50;
        const boxNumber = 2 * Math.round((x * y / boxSize) / 2)
        const wrapper = document.getElementsByClassName("wrapper")[0];
        for (let box = 0; box < boxNumber; box++) {
            const tile = document.createElement("div");
            tile.classList.add("tile");
            tile.id = `tileId_${box}`
            tile.setAttribute('ondrop', "drop(event)")
            tile.setAttribute('ondragover', "allowDrop(event)")
            wrapper.appendChild(tile);
        }
    </script>

    <script>
        //prepair drop location values
        var dropItemLocations = new Map();
        //allow drop
        function allowDrop(ev) {
            ev.preventDefault();
        }
        //dragging item
        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }
        //dropping item
        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            dropItemLocations.set(data, { x: ev.screenX, y: ev.screenY })
            ev.target.appendChild(document.getElementById(data));
        }
    </script>


    <footer class="footer-content">
        <section class="footer-section-logo">
            <img src="./images/Logo-Zwart-Oranje-1-1024x453-1.png" alt="InnoBeweegLab Logo Zwart" />
            <span id="copyright">Built with ❤ by InnoBeweegLab © 2022 </span>
            <span id="illustrations">Illustration by <a
                    href="https://icons8.com/illustrations/author/u7l2K4BCiAa9">Natasha Remarchuk</a>
                from
                <a href="https://icons8.com/illustrations">Ouch!</a></span>
        </section>
        <section class="footer-section-links">
            <article class="footer-article-left">
                <h2>Over ons</h2>
                <a href="/">Beweegonderzoek</a>
                <a href="https://innobeweeglab.nl/" target="_blank">InnoBeweegLab</a>
                <a href="https://onderzoek.eindhoven.nl/" target="_blank">Gemeente Eindhoven</a>
            </article>
            <article class="footer-article-right">
                <h2>Legal</h2>
                <a href="/terms-and-conditions.pdf" target="_blank">Algemene voorwaarden</a>
                <a href="/privacy-policy.pdf" target="_blank">Privacybeleid</a>
                <a href="mailto: support@fluxpuck.com" target="_blank">Contact</a>
            </article>
        </section>
    </footer>

</body>

</html>