<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>WBK - Home</title>

    <!-- LeafletJS CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
        integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="" />
    <!-- LefletJS JS -->
    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
        integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>

</head>

<body>

    <main class="content">
        <form x-on:keydown.prevent.enter="" id="BeweegOnderzoek">

            <!-- Information Tab -->
            <section id="info-tab" class="content-container-page" style="display:grid;">

                <label class="content-container-label">
                    <h1>Informatie</h1>
                </label>

                <div class="content-container-left first-content">
                    <div class="survey-info">
                        <h1>Beweegonderzoek</h1>
                        <p>Welkom bij het beweegonderzoek voor inwoners van Stratum. Het doel van dit onderzoek is de
                            sport en beweeg wensen en behoeften te achterhalen. Deze informatie is van belang voor de
                            herontwikkelingsplannen van de gemeente Eindhoven.</p>
                        <p>Dit onderzoek duurt ongeveer 2 minuten.</p>
                        <p>Meer informatie over het beweegonderzoek kunt u vinden op <a
                                href="https://innobeweeglab.nl/beweegonderzoek/">InnoBeweegLab.nl</a>.</p>
                        <br>
                        <input name="voorwaarden" id="check" type="checkbox" required><span>ik ga akkoord met de <a
                                href="">algemene voorwaarden</a></span></input>
                    </div>

                    <div class="button-box check">
                        <input class="next-btn btn" type="button" value="Start" />
                    </div>

                </div>

                <div class="content-container-right">
                    <img id="beweegAfbeelding"
                        src="https://innobeweeglab.nl/wp-content/uploads/2022/06/DSC_0856v2-scaled.jpg" />
                </div>
            </section>

            <!-- Identity Tab -->
            <section id="iden-tab" class="content-container-page" style="display:none;">
                <label class="content-container-label">
                    <h1>1. Deelnemer</h1>
                </label>
                <div class="content-container-left">

                    <article class="content-article">

                        <div>
                            <h1>1.1 Wat is uw voornaam?</h1>
                            <p>Om een beeld te krijgen bij de deelnemers van het beweegondoerzoek vragen wij om uw
                                voornaam.</p>
                            <input name="naam" id="naam" class="input-fld" type="text" placeholder="voornaam"
                                pattern="[A-Za-z]{1,32}" maxlength="16" required />
                        </div>
                        <div>
                            <h1>1.2 Wat is uw leeftijd?</h1>
                            <p>Graag krijgen wij een indicatie tot welke leefdtijdsgroep u behoord.</p>
                            <select name="leeftijd" id="leeftijd" class="input-fld" placeholder="leeftijd" required>
                                <option value="5/11">5 - 11 jaar</option>
                                <option value="12/17">12 - 17 jaar</option>
                                <option value="18/34">18 - 34 jaar</option>
                                <option value="35/64">35 - 64 jaar</option>
                                <option value="65+">65+</option>
                            </select>
                        </div>
                        <div>
                            <h1>1.3 Wat is uw postcode?</h1>
                            <p>Dit onderzoek is gericht op wijkbewoners van Stratum te Eindhoven. Ter verificatie hebben
                                we uw postcode nodig.</p>
                            <input name="postcode" id="postcode" class="input-fld" type="text" placeholder="postcode"
                                pattern="[0-9]{4}" maxlength="4" required />
                        </div>

                    </article>

                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="next-btn btn" type="button" value="next >" />
                    </div>

                </div>
                <div class="content-container-right">



                </div>
            </section>

            <!-- NNGB Tab -->
            <section id="nngb-tab" class="content-container-page" style="display:none;">
                <label class="content-container-label">
                    <h1>2. NNGB</h1>
                </label>
                <div class="content-container-left">

                    <article class="content-article">

                        <div>
                            <h1>2.1 Heeft u een fysieke beperking?</h1>
                            <p>Sporten en bewegen voor mensen met een fysieke beperking is niet vanzelfsprekend. Graag
                                komen wij te weten of u een fysieke beperking heeft.</p>
                            <br>
                            <div>
                                <input type="radio" name="beperking" id="beperking-yes" value="Ja" required>
                                <label for="beperking">Ja</label><br>
                                <input type="radio" name="beperking" id="beperking-no" value="Nee">
                                <label for="beperking">Nee</label><br>
                            </div>
                        </div>

                        <div>
                            <h1>2.2 Voldoet u aan de beweegrichtlijnen?</h1>
                            <p>Bewegen en sporten is goed voor je. Rechts staan de beweegrichtlijnen voor gezond
                                bewegen. Wij komen graag te weten of u voldoet aan deze richtlijnen. </p>
                            <br>
                            <div>
                                <input type="radio" name="nngb" id="nngb-yes" value="Ja" required>
                                <label for="nngb">Ja</label><br>
                                <input type="radio" name="nngb" id="nngb-no" value="Nee">
                                <label for="nngb">Nee</label><br>
                            </div>
                        </div>



                    </article>

                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="next-btn btn" type="button" value="next >" />
                    </div>

                </div>
                <div class="content-container-right">

                    <div class="nngb-container-title">
                        <h1>NNGB - Nationale Norm Gezond Bewegen</h1>
                        <p>De beweegrichtlijnen, zoals opgesteld door het kenniscentrum Sport & Bewegen voor de
                            Nationale
                            Norm Gezond Bewegen.</p>
                    </div>

                    <div class="nngb-container" id="NNGB1" style="display: none;">
                        <div class="nngb-container-item">
                            <img src="./images/nngb/ropejump.png" alt="Rope jumping" />
                            <div>
                                <h2>1 uur per dag</h2>
                                <p>Matig intensief bewegen (als je ademhaling sneller wordt).</p>
                            </div>
                        </div>
                        <div class="nngb-container-item">
                            <img src="./images/nngb/hanging.png" alt="Hanging" />
                            <div>
                                <h2>3x per week</h2>
                                <p>Sport(ieve) activiteiten zoals fietsen, buitenspelen, fitness en andere sporten.</p>
                            </div>
                        </div>
                    </div>

                    <div class="nngb-container" id="NNGB2" style="display: none;">
                        <div class="nngb-container-item">
                            <img src="./images/nngb/cycling.png" alt="Cycling">
                            <div>
                                <h2>2,5 uur per week</h2>
                                <p>Matig intensief bewegen (als je ademhaling sneller wordt), verspreid over meerdere
                                    dagen.
                                </p>
                            </div>
                        </div>
                        <div class="nngb-container-item">
                            <img src="./images/nngb/yoga.png" alt="Yoga">
                            <div>
                                <h2>2x per week</h2>
                                <p>Sport(ieve) activiteiten zoals fietsen, buitenspelen, fitness en andere sporten (voor
                                    ouderen in combinatie met balans oefeningen).</p>
                            </div>
                        </div>
                    </div>

                </div>
            </section>

            <!-- Reasoning Tab -->
            <section id="bwrd-tab" class="content-container-page" style="display:none;">
                <label class="content-container-label">
                    <h1>3. Beweegredenen</h1>
                </label>
                <div class="content-container-left">

                    <article class="content-article">

                        <div>
                            <h1>3.1 Wat zijn uw beweegredenen?</h1>
                            <p>Graag komen we te weten waarom je aan beweging/sporten doet. Kies de reden die het meest
                                van toepassing is.</p>
                            <br>
                            <select name="beweegreden" id="beweegreden" class="input-fld" placeholder="beweegreden"
                                required>
                                <option value="Gezondheid">Gezondheid</option>
                                <option value="Opbouw conditie, kracht en/of lenigheid">Opbouw conditie, kracht en/of
                                    lenigheid</option>
                                <option value="Lekker buiten zijn">Lekker buiten zijn</option>
                                <option value="Leuke activiteit en plezier">Leuke activiteit en plezier</option>
                                <option value="Gezelligheid en sociale contacten">Gezelligheid en sociale contacten
                                </option>
                                <option value="Onspanning, als uitlaatklep">Onspanning, als uitlaatklep</option>
                                <option value="Prestatie, jezelf verbeteren">Prestatie, jezelf verbeteren</option>
                                <option value="Competitie, meten met anderen">Competitie, meten met anderen</option>
                                <option value="Nieuwe vaardigheden leren">Nieuwe vaardigheden leren</option>
                                <option value="Geen van deze redenen">Geen van deze redenen</option>
                                <option value="Ik sport of beweeg niet">Ik sport of beweeg niet</option>
                            </select>
                        </div>

                        <div>
                            <h1>3.2 Wat zijn belemmeringen om te bewegen?</h1>
                            <p>Ook komen we graag te weten wat je belemmerd om te bewegen/sporten. Kies de reden die het
                                meest van toepassing is.</p>
                            <br>
                            <select name="beweegbelemmering" id="beweegbelemmering" class="input-fld"
                                placeholder="beweegbelemmering" required>
                                <option value="Tijdsgebrek">Tijdsgebrek</option>
                                <option value="Lichaamelijke belemmering">Lichaamelijke belemmering</option>
                                <option value="Beperkte motivatie">Beperkte motivatie</option>
                                <option value="Geen sportmaatje">Geen sportmaatje</option>
                                <option value="Te duur">Te duur</option>
                                <option value="Onspanning, als uitlaatklep">Onspanning, als uitlaatklep</option>
                                <option value="Prestatie, jezelf verbeteren">Prestatie, jezelf verbeteren</option>
                                <option value="Competitie, meten met anderen">Competitie, meten met anderen</option>
                                <option value="Nieuwe vaardigheden leren">Nieuwe vaardigheden leren</option>
                                <option value="Geen van deze redenen">Geen van deze redenen</option>
                                <option value="Ik ervaar geen belemmering in sporten">Ik ervaar geen belemmering in
                                    sporten</option>
                            </select>
                        </div>

                    </article>

                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="next-btn btn" type="button" value="next >" />
                    </div>

                </div>
                <div class="content-container-right">


                </div>
            </section>

            <!-- Character Selection -->
            <section id="char-tab" class="content-container-page" style="display:none;">
                <label class="content-container-label">
                    <h1>4. Doelgroep</h1>
                </label>
                <div class="content-container-left">
                    <article class="content-article">

                        <div>
                            <h1>4.1 Wat is uw geslacht?</h1>
                            <div>
                                <input type="radio" name="geslacht" id="male" value="Man" required autofocus>
                                <label for="geslacht">Man</label><br>
                                <input type="radio" name="geslacht" id="female" value="Vrouw">
                                <label for="geslacht">Vrouw</label><br>
                                <input type="radio" name="geslacht" id="different" value="Anders">
                                <label for="geslacht">Anders</label><br>
                            </div>
                        </div>

                        <div>
                            <h1>4.2 Welke persona spreekt het meest tot jouw?</h1>
                            <p>Het onderzoek richt zich op verschillende doelgroepen in de wijk Stratum. Graag komen we
                                erachter welke doelgroep het meest tot jou aanspreekt. Kies een persona door rechts op
                                een van de karakters te klikken en de tekst in de identiteitskaart te lezen.</p> <br>
                            <h1>→</h1>
                        </div>

                    </article>

                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="next-btn btn" type="button" value="next >" />
                    </div>

                </div>
                <div class="content-container-right space">

                    <section class="id-card" id="id-card">
                        <div class="id-card-title">
                            <h1>Identiteitskaart</h1>
                        </div>
                        <div class="id-photo">

                        </div>
                        <div class="id-info">
                            <h1 id="id-info-name"></h1>
                            <p id="id-info-persona"></p>
                            <p id="id-info-reden"></p>
                            <p id="id-info-belemmering"></p>
                        </div>
                    </section>

                    <div class="avatar-selection">
                        <section class="avatar-list" name="avatar" required>
                            <!-- Male Avatars -->
                            <option class="avatar male Bs" id="Bs-male" value="Basisscholier"
                                onclick="selectCharacter(this)"></option>
                            <option class="avatar male Ms" id="Ms-male" value="Middelbare scholier"
                                onclick="selectCharacter(this)"> </option>
                            <option class="avatar male St" id="St-male" value="Student" onclick="selectCharacter(this)">
                            </option>
                            <option class="avatar male Ft" id="Ft-male" value="Fulltimer"
                                onclick="selectCharacter(this)">
                            </option>
                            <option class="avatar male Pt" id="Pt-male" value="Parttimer"
                                onclick="selectCharacter(this)">
                            </option>
                            <option class="avatar male Ps" id="Ps-male" value="Gepensioneerde"
                                onclick="selectCharacter(this)"> </option>
                            <!-- Female Avatars -->
                            <option class="avatar female Bs" id="Bs-female" value="Basisscholier"
                                onclick="selectCharacter(this)"> </option>
                            <option class="avatar female Ms" id="Ms-female" value="Middelbare scholier"
                                onclick="selectCharacter(this)"> </option>
                            <option class="avatar female St" id="St-female" value="Student"
                                onclick="selectCharacter(this)">
                            </option>
                            <option class="avatar female Ft" id="Ft-female" value="Fulltimer"
                                onclick="selectCharacter(this)">
                            </option>
                            <option class="avatar female Pt" id="Pt-female" value="Parttimer"
                                onclick="selectCharacter(this)">
                            </option>
                            <option class="avatar female Zv" id="Zv-female" value="Zwangere vrouw"
                                onclick="selectCharacter(this)"> </option>
                            <option class="avatar female Ps" id="Ps-female" value="Gepensioneerde"
                                onclick="selectCharacter(this)"></option>
                        </section>
                    </div>

                </div>
            </section>

            <!-- WijkBeweegKaart -->
            <section id="wbk-tab" class="content-container-page" style="display:none;">
                <label class="content-container-label">
                    <h1>5. WijkBeweegKaart</h1>
                </label>
                <div class="content-container-left">
                    <article class="content-article">
                        <div>
                            <h1>5.1 Wat zijn uw sport- en speelwensen en behoeften?</h1>
                            <p>Wij komen graag uw sport- en beweegwensen en behoeften te weten! Dit kunt u aangeven door
                                de gewenste sport- en speel-elementen op de kaart te slepen.</p>
                            <br>
                            <nav class="item-elements" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <div id="item0" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item1" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item2" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item3" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item4" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item5" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item6" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                                <div id="item7" class="tile item" draggable="true" ondragstart="drag(event)"></div>
                            </nav>
                        </div>
                    </article>
                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="next-btn btn" type="button" value="next >" />
                    </div>

                </div>
                <div class="content-container-right">
                    <section class="map-container" id="mpcr"></section>
                </div>
            </section>

            <!-- Thanks Screen -->
            <section id="thnx-tab" class="content-container-page" style="display:none;">
                <div class="content-container-left first-content">
                    <div class="survey-info">
                        <h1>Bedankt voor uw bijdragen!</h1>
                        <p>InnoBeweegLab en de Gemeente Eindhoven bedanken u voor uw bijdragen aan het beweegonderzoek.
                        </p>
                        <p>U kunt verder helpen door dit onderzoek te delen met uw naaste familie en andere
                            wijkbewoners!</p>
                    </div>
                    <div class="content-btns">
                        <input class="prev-btn btn" type="button" value="< previous" />
                        <input class="subm-btn btn" type="submit" />
                    </div>

                </div>
                <div class="content-container-right">

                    <img id="beweegAfbeelding" alt="InnoBeweegLab"
                        src="https://innobeweeglab.nl/wp-content/uploads/2022/07/IMG_5414-1-scaled-e1658235684100.jpg" />

                </div>
            </section>

        </form>
    </main>

    <script>
        /* Pagination function for the Form*/
        //put all container pages in an array
        const formPages = document.getElementsByClassName('content-container-page')
        const buttonArray = document.getElementsByClassName('btn');
        var currentPage = 0, currentView = 0

        //for each button press, action
        for (let btn of buttonArray) {
            btn.addEventListener('click', async event => {
                //check if button is checked
                if (document.getElementById('check').checked == false) return alert("Je hebt de algemene voorwaarden niet geaccepteerd.");
                //go to next page
                if (btn.classList.contains('next-btn')) {
                    if (currentPage < formPages.length) {

                        //check if name, age and postcode is filled
                        if (formPages[currentPage].id == "iden-tab") {
                            // --> check if name is given
                            const nameInput = document.getElementById('naam').value
                            if (!nameInput) return alert('U heeft uw naam nog niet opgegeven.')

                            // --> check if age is selected
                            const ageInput = document.getElementById('leeftijd').value
                            if (!ageInput) return alert('Selecteer een leeftijdscategorie.')

                            // --> check if postcode is valid in Stratum
                            const response = await fetch('https://data.eindhoven.nl/api/records/1.0/search/?dataset=postcode-buurt-wijk&q=&rows=50&facet=postcode4')
                            const result = response ? await response.json() : null
                            if (response == null) return alert('Oops... er is iets mis gegaan!')
                            //construct data-points
                            const zipCodes = result.facet_groups[0].facets.map(i => i.name)
                            const zipInput = document.getElementById('postcode').value
                            //check postcode
                            if (zipInput) {
                                if (!zipCodes.includes(zipInput.toString())) return alert("Uw postcode komt niet uit de wijk Stratum, te Eindhoven. Dit onderzoek is uitsluitend gericht op inwoners van deze wijk.");
                            } else {
                                return alert("U heeft nog geen postcode ingevoerd.");
                            }

                            // ->> set NNGB image, based on age
                            const nngb1 = document.getElementById('NNGB1');
                            const nngb2 = document.getElementById('NNGB2');
                            if (ageInput == '5/11' || ageInput == '12/17') {
                                nngb1.style.display = 'grid';
                                nngb2.style.display = 'none';
                            } else {
                                nngb1.style.display = 'none';
                                nngb2.style.display = 'grid';
                            }

                            // ---> show avatars based on age selection
                            const avatarArray = document.getElementsByClassName('avatar');
                            switch (ageInput) {
                                case '5/11':
                                    for (let avatar of avatarArray) {
                                        if (avatar.classList.contains('Bs') ||
                                            avatar.classList.contains('Us')) {
                                            avatar.style.display = 'block';
                                            avatar.classList.add('active-avatar')
                                        }
                                        else {
                                            avatar.style.display = 'none';
                                            avatar.classList.remove('active-avatar')
                                        }
                                    }
                                    break;
                                case '12/17':
                                    for (let avatar of avatarArray) {
                                        if (avatar.classList.contains('Ms') ||
                                            avatar.classList.contains('Us')) {
                                            avatar.style.display = 'block';
                                            avatar.classList.add('active-avatar')
                                        }
                                        else {
                                            avatar.style.display = 'none';
                                            avatar.classList.remove('active-avatar')
                                        }
                                    }
                                    break;
                                case '18/34':
                                    for (let avatar of avatarArray) {
                                        if (avatar.classList.contains('St') ||
                                            avatar.classList.contains('Ft') ||
                                            avatar.classList.contains('Pt') ||
                                            avatar.classList.contains('Zv') ||
                                            avatar.classList.contains('Mn') ||
                                            avatar.classList.contains('Us')) {
                                            avatar.style.display = 'block';
                                            avatar.classList.add('active-avatar')
                                        }
                                        else {
                                            avatar.style.display = 'none';
                                            avatar.classList.remove('active-avatar')
                                        }
                                    }
                                    break;
                                case '35/64':
                                    for (let avatar of avatarArray) {
                                        if (avatar.classList.contains('Ft') ||
                                            avatar.classList.contains('Pt') ||
                                            avatar.classList.contains('Mn') ||
                                            avatar.classList.contains('Us')) {
                                            avatar.style.display = 'block';
                                            avatar.classList.add('active-avatar')
                                        }
                                        else {
                                            avatar.style.display = 'none';
                                            avatar.classList.remove('active-avatar')
                                        }
                                    }
                                    break;
                                case '65+':
                                    for (let avatar of avatarArray) {
                                        if (avatar.classList.contains('Ps') ||
                                            avatar.classList.contains('Us')) {
                                            avatar.style.display = 'block';
                                            avatar.classList.add('active-avatar')
                                        }
                                        else {
                                            avatar.style.display = 'none';
                                            avatar.classList.remove('active-avatar')
                                        }
                                    }
                                    break;
                                default:
                                    break;
                            }
                        }

                        //check if Beperking & NNGB has been checked
                        if (formPages[currentPage].id == "nngb-tab") {
                            //check if a value is selected for beperking
                            const bpkRadioButtons = document.getElementsByName('beperking')
                            if (Array.from(bpkRadioButtons).some(radio => radio.checked == true) == false) return alert("Beantwoord vraag 2.1 door 'Ja' of 'Nee' te selecteren.")
                            //check if a value is slected for nngb
                            const nngbRadioButtons = document.getElementsByName('nngb')
                            if (Array.from(nngbRadioButtons).some(radio => radio.checked == true) == false) return alert("Beantwoord vraag 2.2 door 'Ja' of 'Nee' te selecteren.")
                        }

                        //check if beweegreden en belemmering has been chosen
                        if (formPages[currentPage].id == "bwrd-tab") {
                            // --> check if beweegreden is selected
                            const redenInput = document.getElementById('beweegreden').value
                            if (!redenInput) return alert('Selecteer een beweegreden.')

                            // --> check if beweegbelemmering is selected
                            const belemmeringInput = document.getElementById('beweegbelemmering').value
                            if (!belemmeringInput) return alert('Selecteer een beweegbelemmering.')

                            // ->> set ID-card name (once)
                            if (!document.getElementById('id-info-name').innerHTML) {
                                //set Name for ID-card
                                const h1 = document.getElementById('id-info-name');
                                const nameValue = document.createTextNode(`¹   ${document.getElementById('naam').value}`)
                                h1.appendChild(nameValue);
                            }

                            // ->> set ID-card values
                            const p1 = document.getElementById('id-info-reden');
                            const p2 = document.getElementById('id-info-belemmering');
                            //clean innerHTML
                            p1.innerHTML = "", p2.innerHTML = "";
                            //write innerHTML
                            const textValue1 = document.createTextNode(`³   ${redenInput}`)
                            const textValue2 = document.createTextNode(`⁴   ${belemmeringInput}`)
                            p1.appendChild(textValue1);
                            p2.appendChild(textValue2);

                        }

                        //if character tab, check if a character is selected
                        if (formPages[currentPage].id == "char-tab") {
                            //check if a value is selected for beperking
                            const doelgroepButtons = document.getElementsByName('geslacht')
                            if (Array.from(doelgroepButtons).some(radio => radio.checked == true) == false) return alert("Kies een geslacht, alvorens u verder gaat")

                            //check if a character is selecter
                            const avatarArray = document.getElementsByClassName('avatar')
                            let isAvatarSelecter = false
                            for (let child of Array.from(avatarArray)) {
                                if (child.selected == true) isAvatarSelecter = true;
                            }
                            if (isAvatarSelecter == false) return alert("U heeft nog geen character geselecteerd.")
                        }

                        //if wijkbeweegkaart tab, kijk of de kaart is gevuld en bewaar de 
                        if (formPages[currentPage].id == "wbk-tab") {
                            console.log(dropItemLocations)
                            if (dropItemLocations.size < 2) return alert("U heeft nog geen sport- en beweegbehoeften aangegeven!")
                        }


                        //disable current page
                        formPages[currentPage].style.display = "none";
                        //move up page
                        currentPage++
                        //show new page
                        formPages[currentPage].style.display = "grid";

                        //create grid boxes on wijkbeweegkaart tab
                        if (formPages[currentPage].id == "wbk-tab") {
                            if (currentView == 0) createGridBoxes();
                            currentView++
                        }

                    }
                }
                //go to previous page
                if (btn.classList.contains('prev-btn')) {
                    if (currentPage > 0) {
                        //disable current page
                        formPages[currentPage].style.display = "none";
                        //move down page
                        currentPage--
                        //show new page
                        formPages[currentPage].style.display = "grid";
                    }
                }

            })
        }
    </script>

    <script>
        //show characters based on sex selection
        const sexButtons = document.getElementsByName('geslacht');
        const MaleAvatars = document.getElementsByClassName('male active-avatar');
        const FemaleAvatars = document.getElementsByClassName('female active-avatar');
        for (let btn of sexButtons) {
            btn.addEventListener('click', async event => {
                switch (btn.value) {
                    case "Man":
                        for (let male of MaleAvatars) male.style.display = 'unset';
                        for (let female of FemaleAvatars) female.style.display = 'none';
                        break;
                    case "Vrouw":
                        for (let male of MaleAvatars) male.style.display = 'none';
                        for (let female of FemaleAvatars) female.style.display = 'unset';
                        break;
                    case "Anders":
                        for (let male of MaleAvatars) male.style.display = 'unset';
                        for (let female of FemaleAvatars) female.style.display = 'unset';
                        break;
                    default:
                        break;
                }
            })
        }

        //select the avatars && show ID card
        function selectCharacter(avatar) {

            //set name value
            const nameInput = document.getElementById('naam').value
            //unselect the avatar
            const avatarArray = document.getElementsByClassName('avatar');
            for (let item of avatarArray) item.selected = null;
            if (avatar.selected) avatar.selected = null;
            else avatar.selected = true;

            //change profile picture on ID card
            const avatarImage = document.getElementsByClassName('id-photo')[0]
            avatarImage.id = avatar.id

            //change profile persona title on ID card
            const persona = document.getElementById('id-info-persona');
            persona.innerHTML = "";
            //write innerHTML
            const textValue = document.createTextNode(`²   ${avatar.value}`)
            persona.appendChild(textValue);
        }

    </script>

    <script>
        //gridboxing function
        function createGridBoxes() {
            //get map container and set grid template
            const mapContainer = document.getElementById('mpcr')

            //calcualte width and height sizes
            const x_count = Math.round(mapContainer.offsetWidth / 50)
            const y_count = Math.round(mapContainer.offsetHeight / 50)
            //add grid template
            mapContainer.style.gridTemplateRows = `repeat(${y_count}, 1fr)`;
            mapContainer.style.gridTemplateColumns = `repeat(${x_count}, 1fr)`;

            //remove childs before re-arranging tiles
            while (mapContainer.firstChild) {
                mapContainer.removeChild(mapContainer.firstChild);
            }

            //create tiles, add styling and drag functionality
            const tileCount = x_count * y_count;
            for (let tile_ = 0; tile_ < tileCount; tile_++) {
                const tile = document.createElement('div');
                tile.classList.add('tile');
                tile.id = `tileId_${tile_}`
                tile.setAttribute('ondrop', "drop(event)")
                tile.setAttribute('ondragover', "allowDrop(event)")
                mapContainer.appendChild(tile);
            }
        }

        //recreate all grid boxes on window resize
        window.addEventListener('resize', (event) => {
            createGridBoxes();
        });

    </script>

    <script>
        //prepair drop location values
        var dropItemLocations = new Map();
        //allow drop
        function allowDrop(ev) {
            ev.preventDefault();
        }
        //dragging item
        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }
        //dropping item
        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            dropItemLocations.set(data, { x: ev.screenX, y: ev.screenY })
            ev.target.appendChild(document.getElementById(data));
        }
    </script>


    <footer class="footer-content">
        <section class="footer-section-logo">
            <img src="./images/Logo-Zwart-Oranje-1-1024x453-1.png" alt="InnoBeweegLab Logo Zwart" />
            <span id="copyright">Built with ❤ by InnoBeweegLab © 2022 </span>
            <span id="illustrations">Illustration by <a
                    href="https://icons8.com/illustrations/author/u7l2K4BCiAa9">Natasha Remarchuk</a>
                from
                <a href="https://icons8.com/illustrations">Ouch!</a></span>
        </section>
        <section class="footer-section-links">
            <article class="footer-article-left">
                <h2>Over ons</h2>
                <a href="/">Beweegonderzoek</a>
                <a href="https://innobeweeglab.nl/" target="_blank">InnoBeweegLab</a>
                <a href="https://onderzoek.eindhoven.nl/" target="_blank">Gemeente Eindhoven</a>
            </article>
            <article class="footer-article-right">
                <h2>Legal</h2>
                <a href="/terms-and-conditions.pdf" target="_blank">Algemene voorwaarden</a>
                <a href="/privacy-policy.pdf" target="_blank">Privacybeleid</a>
                <a href="mailto: support@fluxpuck.com" target="_blank">Contact</a>
            </article>
        </section>
    </footer>

</body>

</html>